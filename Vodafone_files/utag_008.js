//tealium universal tag - utag.1522 ut4.0.202104070700, Copyright 2021 Tealium.com Inc. All Rights Reserved.
try{(function(id,loader){var u={};utag.o[loader].sender[id]=u;if(utag===undefined){utag={};}if(utag.ut===undefined){utag.ut={};}if(utag.ut.loader===undefined){u.loader=function(o){var a,b,c,l;a=document;if(o.type==="iframe"){b=a.createElement("iframe");b.setAttribute("height","1");b.setAttribute("width","1");b.setAttribute("style","display:none");b.setAttribute("src",o.src);}else if(o.type==="img"){utag.DB("Attach img: "+o.src);b=new Image();b.src=o.src;return;}else{b=a.createElement("script");b.language="javascript";b.type="text/javascript";b.async=1;b.charset="utf-8";b.src=o.src;}if(o.id){b.id=o.id;}if(typeof o.cb==="function"){if(b.addEventListener){b.addEventListener("load",function(){o.cb();},false);}else{b.onreadystatechange=function(){if(this.readyState==="complete"||this.readyState==="loaded"){this.onreadystatechange=null;o.cb();}};}}l=o.loc||"head";c=a.getElementsByTagName(l)[0];if(c){utag.DB("Attach to "+l+": "+o.src);if(l==="script"){c.parentNode.insertBefore(b,c);}else{c.appendChild(b);}}};}else{u.loader=utag.ut.loader;}
u.ev={'view':1};u.initialized=false;u.map={};u.extend=[function(a,b){try{if(1){(function(e,n){"use strict";var t,r,o={},i=[],a=["x-vf-trace-source","x-vf-trace-source-version"],s={clientVersion:"5.0.0",timeUnit:"sec",na:"NA",empty:"",null:null,binsName:"VF-BINS",binsUuid:"c7b152e2-4c0f-49aa-abe3-e657dc85e224",maxContentLength:64e3},c={type:{page:"Page",uiControl:"UIControl",uiCustom:"UICustom"},element:{pageDomLoaded:"page-dom-loaded",pageLoaded:"page-loaded",pageView:"Page View",softNavigation:"soft-navigation"}},d={homeDoc:"not_fired",pageLoad:!0,pageDomLoad:!0,isSMAPIEnabled:!0,angularLocationChangeEnabled:!0};o.homeDocResponse=void 0,e.internal=o,e.setVerbose=!1,e.Environment={VF_PRE:"https://events-pre.sp.vodafone.com",VF_PROD:"https://events.sp.vodafone.com",GCP_TEST:"https://gcpsmapi-test.vodafone.com",GCP_PRE:"https://gcpsmapi-pre.vodafone.com",GCP_PROD:"https://gcpsmapi.vodafone.com"},o.debug=function(){if(e.setVerbose){var n=Array.prototype.slice.call(arguments);console.log.apply(console,n)}},o.removeAllElements=function(e){e.length=0},o.addElements=function(e,n){n.forEach(function(n){e.push(n)})},o.contains=function(e,n){return e.indexOf(n)>=0},o.isUndefined=function(e){return void 0===e},o.isValidEvent=function(e){return!o.isUndefined(e)&&!o.isUndefined(e.payload)&&!o.isUndefined(e.payload.xVfEvents)},o.validateField=function(e){return o.isUndefined(e)||null===e||"string"==typeof e&&e.trim()===s.empty?s.na:e},o.setDefault=function(e,n,t){e&&o.isUndefined(e[n])&&(e[n]=t)},o.setValue=function(e,n,t){e&&(e[n]=t)},o.forKeyValue=function(e,n){if("function"==typeof n)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n(t,e[t])},o.merge=function(e,n){o.forKeyValue(n,function(n,t){o.setDefault(e,n,t)})},o.bytesFrom=function(e){var n=[];if("string"==typeof e)for(var t=0;t<e.length;++t)n.push(e.charCodeAt(t));return n},o.setHeaders=function(e,n){o.forKeyValue(n,function(n,t){n&&t&&e.setRequestHeader(n,t)})},o.httpAsyncDefault=!0,o.closingWindow=!1,o.http=function(e){var n;if(!o.isUndefined(e)){if(o.setDefault(e,"async",o.httpAsyncDefault),o.setDefault(e,"data",null),o.setDefault(e,"headers",{}),null!==e.data){for(var t=JSON.parse(e.data),r=0;r<t.length;r++)for(var i=Object.keys(t[r]),d=0;d<i.length;d++){var u=i[d];0===u.length&&delete t[r][d]}t=t.map(function(e){return e.xVfEvents}),n=JSON.stringify(t)}if(o.closingWindow&&"sendBeacon"in navigator&&"function"==typeof navigator.sendBeacon){var f=e.url+"?source="+e.headers["x-vf-trace-source"]+"&sver="+e.headers["x-vf-trace-source-version"];if(null===e.data)return navigator.sendBeacon(f,null);if(o.debug("sending beacon using "+n),n.length>s.maxContentLength){var l=function(e){if(!(Array.isArray(e)&&e.length>1))return{};var n={};return n.otherEvent=e.filter(function(e){return e["event-element"]!==c.element.pageView}),n.pageViewEvent=e.filter(function(e){return e["event-element"]===c.element.pageView})[0],n},p=l(JSON.parse(n));if(!o.isUndefined(p.otherEvent)&&Array.isArray(p.otherEvent)&&p.otherEvent.length){var v=navigator.sendBeacon(f,JSON.stringify(p.otherEvent));o.debug((v?"Other request success":"Other request failed")+JSON.stringify([p.otherEvent]).length)}if(!o.isUndefined(p.pageViewEvent)){var g=function(e,n){if(!(JSON.stringify([e]).length>s.maxContentLength&&Array.isArray(n)&&n.length>0))return e;var t=n.shift();return e["event-description"]=JSON.stringify(JSON.parse(e["event-description"]).filter(function(e){return e.type!==t})),g(e,n),e},m=p.pageViewEvent,h=JSON.stringify([m]);h.length>s.maxContentLength&&(m["event-description"]=JSON.stringify(JSON.parse(m["event-description"]).map(function(e){return e.url=-1!==e.url.indexOf("?")?e.url.split("?").shift():e.url,e})),m=g(m,["script","img","css","link"])),h=JSON.stringify([m]),h.length>s.maxContentLength&&(m["event-description"]="Event is greater than "+s.maxContentLength/1e3+"kb, application needs to check the resources.");var y=navigator.sendBeacon(f,JSON.stringify([m]));o.debug((y?"PageView Event request success":"PageView Event request failed")+h.length)}return}return navigator.sendBeacon(f,n)}var w=new XMLHttpRequest;return w.open(e.method,e.url,e.async),a.forEach(function(n){var t={};t[n]=e.headers[n],o.setHeaders(w,t)}),e.async?(e.onSuccess&&(w.onload=function(){e.onSuccess(w.responseText,w.status)}),e.onError&&(w.onerror=function(){e.onError(w.responseText,w.status)}),null===e.data?w.send(e.data):(o.debug(n),w.send(n)),null):(null===e.data?w.send(e.data):(o.debug("sending XHR using "+n),w.send(n)),{responseText:w.responseText,status:w.status})}o.debug("http() called without parameters")},o.serializer=function(e){if(-1!==e.indexOf("json"))return JSON.stringify;throw new Error("cannot serialize data to "+e)},o.submitLink=function(e,n,t,r){if(!e)throw new Error("link description missing, will not make http requests");if(!(e.type&&e.method&&e.href))return function(){return null};var i=o.serializer(e.type);return function(a){var s={"content-type":e.type},c=i(a);"function"==typeof r&&(c=r(o.bytesFrom(c)),o.merge(s,{"content-encoding":"gzip"})),o.merge(s,n),o.debug(e.method+"ing "+c+" to "+e.href),"function"==typeof t&&t({method:e.method,url:e.href,headers:s,data:c})}},o.getClientSettings=function(e,n){if(o.isUndefined(e)||o.isUndefined(n))throw new Error("link description/metadata missing, will not make http request to get client settings");var t={Accept:e.type};o.merge(t,n);var r=o.http({method:"GET",url:e.href,headers:t,async:!1});if(r.status>=200&&r.status<400)return JSON.parse(r.responseText);throw new Error("failed to GET client settings from "+e.href)},o.getHomeDoc=function(e,n,t){var r={Accept:"application/json"};d.homeDoc="fired",o.merge(r,n),o.http({method:"GET",url:e,headers:r,onSuccess:function(e,n){if(!(n>=200&&n<400))throw d.homeDoc="error",o.homeDocResponse=void 0,new Error("Home document received with status "+n);if(o.homeDocResponse=JSON.parse(e),!o.submitEventsLink(o.homeDocResponse))throw d.homeDoc="error",o.homeDocResponse=void 0,new Error("Invalid response received");d.homeDoc="success",t&&Array.isArray(t)&&t.forEach(function(e){e&&"function"==typeof e&&e()})},onError:function(){throw d.homeDoc="error",o.homeDocResponse=void 0,new Error("failed to GET home document from "+e)}})},o.submitEventsLink=function(e){return e&&e.links?e.links["http://a42.vodafone.com/rels/sec/submit-events"]:null},o.clientSettingsLink=function(e){return e&&e.links?e.links["http://a42.vodafone.com/rels/sec/settings"]:null},o.payloads=function(e){if("object"==typeof e)return e.map(function(e){if("object"==typeof e)return e.payload})},o.addEnteringPage=function(){var e=window.location.origin+window.location.pathname,n=document.title,t=n+"-"+e;return/\d\{9}\d*/.test(t)&&(t=t.replace(/\d\{9}\d*/g,"MASKEDMSISDN")),t},o.addUserAgent=function(){return navigator.userAgent},o.addNetworkBearer=function(){var e;if(!navigator.connection)return s.na;if(e=navigator.connection.effectiveType,"slow-2g"===e)e="2g";else if(void 0===e)return s.na;return e.toUpperCase()},o.addOSversion=function(){var e=s.na,n=navigator.userAgent,t=navigator.appVersion,r=[{s:"Windows 10",r:/(Windows\s10.0|Windows\sNT\s10.0)/},{s:"Windows 8.1",r:/(Windows\s8.1|Windows\sNT\s6.3)/},{s:"Windows 8",r:/(Windows\s8|Windows\sNT\s6.2)/},{s:"Windows 7",r:/(Windows\s7|Windows\sNT\s6.1)/},{s:"Windows Vista",r:/Windows\sNT\s6.0/},{s:"Windows Server 2003",r:/Windows\sNT\s5.2/},{s:"Windows XP",r:/(Windows\sNT\s5.1|Windows\sXP)/},{s:"Windows 2000",r:/(Windows\sNT\s5.0|Windows\s2000)/},{s:"Windows ME",r:/(Win\s9x\s4.90|Windows\sME)/},{s:"Windows 98",r:/(Windows\s98|Win98)/},{s:"Windows 95",r:/(Windows\s95|Win95|Windows_95)/},{s:"Windows NT 4.0",r:/(Windows\sNT\s4.0|WinNT4.0|WinNT|Windows\sNT)/},{s:"Windows CE",r:/Windows\sCE/},{s:"Windows 3.11",r:/Win16/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac\sOS\sX/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\sJeeves\/Teoma|ia_archiver)/}];for(var o in r)if(r.hasOwnProperty(o)){var i=r[o];if(i.r.test(n)){e=i.s;break}}var a=s.na,c=[];switch(/Windows/.test(e)&&(a=/Windows\s(.*)/.exec(e)[1],e="Windows"),e){case"Mac OS X":c=/Mac\sOS\sX\s([._\d]+)/.exec(n),a=c&&c.length>1?c[1]:a;break;case"Android":c=/Android\s([._\d]+)/.exec(n),a=c&&c.length>1?c[1]:a;break;case"iOS":c=/OS\s(\d+)_(\d+)_?(\d+)?/.exec(t),a=c&&c.length>3?c[1]+"."+c[2]+"."+(c[3]||0):a}var d={os:e,osVersion:a};return d},o.addLocale=function(){var e;return e=window.navigator.languages?window.navigator.languages[0]:window.navigator.userLanguage||window.navigator.language,o.isUndefined(e)||null===e?s.na:e},o.addEvents=function(e){o.isUndefined(e)||o.payloads(e).forEach(function(e){o.merge(e,{xVfEvents:i})})},o.addScreenMetric=function(){var e=s.na,n=screen.width,t=screen.height;n||(n=s.empty),t||(t=s.empty),window.innerHeight>=window.innerWidth?e="Portrait":window.innerHeight<window.innerWidth&&(e="Landscape");var r={width:n,height:t,rotation:e};return r},o.generateUUID=function(){var e=(new Date).getTime();return"undefined"!=typeof performance&&"function"==typeof performance.now&&(e+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var t=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===n?t:3&t|8).toString(16)})},o.addUUID=function(){var e,n=document.cookie.split("; ").filter(function(e){return-1!==e.indexOf("VF-UUID")})[0];if(o.isUndefined(n)){var t=o.generateUUID(),r=new Date;r.setTime(r.getTime()+31536e7);var i=";expires="+r.toUTCString();document.cookie="VF-UUID="+t+i+";SameSite=Lax;path=/",e=t}else e=n.split("=").pop();return e},o.isCookieEnabled=function(){var e=!!navigator.cookieEnabled;return void 0!==navigator.cookieEnabled||e||(document.cookie="testCookie",e=-1!==document.cookie.indexOf("testCookie"),document.cookie="testCookie; expires=Thu, 01-Jan-1970 00:00:01 GMT"),e},o.setCookie=function(e,n,t){if(t===s.empty)document.cookie=e+"="+n+";SameSite=Lax;path=/";else{var r=new Date;r.setTime(r.getTime()+60*t*1e3);var o="expires="+r.toUTCString();document.cookie=e+"="+n+";"+o+";SameSite=Lax;path=/"}},o.getCookie=function(e){for(var n=e+"=",t=decodeURIComponent(document.cookie),r=t.split(";"),o=0;o<r.length;o++){for(var i=r[o];" "===i.charAt(0);)i=i.substring(1);if(0===i.indexOf(n))return i.substring(n.length,i.length)}return s.empty},o.getSessionId=function(){var e=30,n="VF-SID";return o.isCookieEnabled()?(t=o.getCookie(n),t===s.empty?(t=o.generateUUID(),o.setCookie(n,t,e)):o.setCookie(n,t,e)):(o.isUndefined(t)||t===s.empty)&&(t=o.generateUUID()),t},o.removeSessionId=function(){o.setCookie("VF-SID",o.getSessionId(),30)},o.getOptStatus=function(){var e="VF-OPT";return o.getCookie(e)===s.empty?(d.isSMAPIEnabled=!0,o.setCookie(e,"true",s.empty)):d.isSMAPIEnabled="true"===o.getCookie(e).toLowerCase(),d.isSMAPIEnabled},o.setOptStatus=function(e){var n="VF-OPT";d.isSMAPIEnabled=e,o.setCookie(n,d.isSMAPIEnabled,s.empty)},o.throttle=function(e,n){if(e&&e.contains)return function(t,r){return e.contains(t)?n:r()}},o.throttleFreeEventsFilter=function(e){var n=o.throttle(e);return function(t){var r=[];return Array.isArray(t)&&t.forEach(function(t){var o=t.duplication;o?n(o.key,function(){r.push(t),e.put(o.key,o.repeatSeconds)}):r.push(t)}),r}},o.TemporaryCache=function(){var e={},n=[];this.contains=function(n){return!o.isUndefined(e[n])},this.put=function(n,t){return n&&"number"==typeof t&&(e[n]=t),this},this.advanceTime=function(n){if("number"==typeof n){var t={};o.forKeyValue(e,function(e,r){var o=r-n;o>0&&(t[e]=o)}),e=t}},this.startClock=function(){var e=this;return n.push(setInterval(function(){e.advanceTime(1)},1e3)),this},this._ticksFor=function(n){return e[n]},this._clearIntervals=function(){n.forEach(function(e){clearInterval(e)})}},o.Cron=function(e,n){var t=[],r=new Date;this.delay=function(){r=new Date},t.push(setInterval(function(){var t=new Date,o=t.getTime()-r.getTime();o>=1e3*n&&(r=t,e())},500)),this._clearIntervals=function(){t.forEach(function(e){clearInterval(e)})}},o.Buffer=function(e,n,t){var r,i=[];this.handler=function(e){n=e},this.flush=function(){i.length>0&&("function"==typeof n&&(o.debug("calling onFullHandler on "+JSON.stringify(i)),n(i)),o.removeAllElements(i),r&&r.delay(),o.debug("buffer flushed"))},this.filter=function(){i=i.filter(function(e){return o.contains([c.type.page,c.type.uiControl],e.xVfEvents["event-type"])}),this._elements=i},this.add=function(n){if(Array.isArray(n)&&(o.addElements(i,o.getUnique(n,"x-vf-trace-transaction-id","xVfEvents")),o.debug("Buffering "+n.length+" new element(s), buffer has "+i.length+" element(s)"),this._elements=i),i.length>=e)var t=setTimeout(function(e){o.closingWindow&&clearTimeout(t),e.flush(),clearTimeout(t)},10,this)},this.clear=function(){o.removeAllElements(i),o.debug("buffer cleared")},this._elements=i,e>0&&t&&(r=new o.Cron(this.flush,t))},o.redactPatterns=[{keyword:"MASKEDMSISDN",pattern:/[0-9]{9}/g}],o.redact=function(e){var n=function(){return"object"==typeof e?JSON.stringify(e):"string"==typeof e?e:e&&"function"==typeof e.toString?e.toString():void 0};if(this.isUndefined(e))return e;var t=n(),r=t;return o.redactPatterns.forEach(function(e){t=t.replace(e.pattern,e.keyword)}),t!==r?t:e},o.eventOccured=function(e,n,t){var i=o.addScreenMetric(),d=new Date,u=d.getTime(),f=o.addEnteringPage(),l=o.generateUUID();/\d{10}\d?\d?\d?/.test(t)&&(t=t.replace(/\d{9}\d?\d?\d?/g,"<PII-redacted>"));var p={"event-type":o.validateField(e),"event-element":o.validateField(n),"page-name":f,"subpage-name":s.na,"event-description":o.validateField(t),"x-vf-trace-timestamp":u,"device-orientation":i.rotation,"x-vf-trace-transaction-id":l,"x-vf-trace-session-id":o.getSessionId(),"x-vf-net-type":s.na,"x-vf-net-band":s.na};for(var v in r)if(r.hasOwnProperty(v)&&!o.contains(a,v)){var g={};g[v]=r[v],o.merge(p,g)}return(p["event-type"]===c.type.page&&p["event-element"]===c.element.pageView||p["event-type"]===c.type.page)&&(p["event-description"]=o.redact(p["event-description"])),p},o.msToSec=function(e){if("number"==typeof e){var n=e>=0?e/1e3:s.null;return n===s.null?n:n%1==0?n:Number(n.toFixed(3))}return s.null},o.resourceTiming=function(e){if(!o.isUndefined(e)){o.debug(e);var n={};return n.url=e.name,n.type=e.initiatorType,n.start=o.msToSec(e.startTime),n.duration=o.msToSec(e.responseEnd-e.startTime),n.redirect=o.msToSec(e.redirectEnd-e.redirectStart),n.dns=o.msToSec(e.domainLookupEnd-e.domainLookupStart),n.tcp=o.msToSec(e.connectEnd-e.connectStart),n.ssl=o.msToSec(e.secureConnectionStart>0?e.connectEnd-e.secureConnectionStart:s.empty),n.request=o.msToSec(e.responseStart-e.requestStart),n.response=o.msToSec(0===e.responseStart?s.empty:e.responseEnd-e.responseStart),n.httpCode=s.empty,n.fid=o.msToSec(s.fid),n.lcp=o.msToSec(s.lcp),n.transferSize=e.transferSize||0<=e.transferSize?e.transferSize:s.null,n}return s.na},o.navigationTiming=function(e){if(!o.isUndefined(e)){o.debug(e);var n={};return n.url=window.location.href,n.type="navigation",n.start=0,n.httpCode=s.empty,n.duration=o.msToSec(e.loadEventEnd-e.navigationStart),n.redirect=o.msToSec(e.redirectEnd-e.redirectStart),n.dns=o.msToSec(e.domainLookupEnd-e.domainLookupStart),n.tcp=o.msToSec(e.connectEnd-e.connectStart),n.ssl=o.msToSec(0===e.secureConnectionStart?s.empty:e.connectEnd-e.secureConnectionStart),n.request=o.msToSec(e.responseStart-e.requestStart),n.response=o.msToSec(e.responseEnd-e.responseStart),n.frontEnd=o.msToSec(e.loadEventEnd-e.domLoading),n.backEnd=o.msToSec(e.responseEnd-e.navigationStart),n.ttfb=o.msToSec(e.responseStart-e.navigationStart),n.fid=o.msToSec(s.fid),n.lcp=o.msToSec(s.lcp),n.srt=o.msToSec(e.domComplete-e.domLoading),n}return s.na},o.handlePageDOMLoadEvent=function(e){var t=function(){d.pageDomLoad=!1;var n=setTimeout(function(){o.pageDomLoadEventHandler(e),clearTimeout(n)},100)};if(n.addEventListener){n.addEventListener("load",t,!0);var r=setInterval(function(){"complete"===document.readyState&&(clearInterval(r),d.pageDomLoad&&t())},1e3)}},o.handlePageLoadEvent=function(e){var t=function(){d.pageLoad=!1;var n=setTimeout(function(){o.pageLoadEventHandler(e),clearTimeout(n)},100)};if(n.addEventListener){n.addEventListener("load",t,!0);var r=setInterval(function(){"complete"===document.readyState&&(clearInterval(r),d.pageLoad&&t())},1e3)}},o.handlePageViewEvent=function(e,n){if(d.isSMAPIEnabled){if(o.isUndefined(performance)||null===performance)i=o.eventOccured(c.type.page,c.element.pageView,s.na);else{var t=[];n&&performance.timing&&t.push(o.navigationTiming(performance.timing));var r=performance.getEntriesByType("resource");r.length>0&&(r.forEach(function(e){t.push(o.resourceTiming(e))}),i=o.eventOccured(c.type.page,c.element.pageView,t),performance.clearResourceTimings())}e.submitEvents([{payload:{}}])}},o.handleDOMChanges=function(e){"function"==typeof MutationObserver&&(o.observer=new MutationObserver(function(t){t.forEach(function(t){for(var r=t.addedNodes,i=0;i<r.length;i++){var a=r[i];if(a instanceof Element)for(var s=a.querySelectorAll("button, [onclick], [type='submit'], [type='button'], [type='reset'], [type='checkbox'], [type='radio'], [type='file'], [type='color'], select, a, img"),c=0;c<s.length;c++)n.addEventListener&&s[c].addEventListener("click",o.throttled(function(n){o.clickEventHandler(n,n.currentTarget,e)},1e3))}})}))},o.throttled=function(e,n){var t=0;return function(r){var o=(new Date).getTime();if(!(o-t<n))return t=o,e(r)}},o.handleBrowserClose=function(e,t){var r=o.createCloseHandler(e,t);n.addEventListener&&(n.addEventListener("beforeunload",r),n.addEventListener("unload",r)),o.removeSessionId()},o.pageDomLoadEventHandler=function(e){if(d.isSMAPIEnabled){var n=(window.performance.timing.domContentLoadedEventEnd-window.performance.timing.navigationStart)/1e3;i=n<0?o.eventOccured(c.type.page,c.element.pageDomLoaded,s.na):o.eventOccured(c.type.page,c.element.pageDomLoaded,n+" "+s.timeUnit),e.submitEvents([{payload:{}}])}},o.pageLoadEventHandler=function(e){if(d.isSMAPIEnabled){var n=(window.performance.timing.loadEventEnd-window.performance.timing.navigationStart)/1e3;i=n<0?o.eventOccured(c.type.page,c.element.pageLoaded,s.na):o.eventOccured(c.type.page,c.element.pageLoaded,n+" "+s.timeUnit),e.submitEvents([{payload:{}}])}},o.clickEventHandler=function(e,n,t){if(d.isSMAPIEnabled){if(o.isUndefined(e)||o.isUndefined(n)||o.isUndefined(t))throw new Error("event/element/eventSubmitter is undefined");var r,a=s.empty;n.getAttribute("aria-label")&&(a=n.getAttribute("aria-label"));var u=a||e.text,f=n.value?n.value:u,l=f||n.innerText,p=n.type?n.type:n.localName,v=n.tagName.toUpperCase(),g=v+" - "+p;switch(v){case"INPUT":r="CHECKBOX"===p.toUpperCase()?l+" - "+(n.checked?"Checked":"Unchecked"):l;break;case"A":r=l+" (URL: "+n.href+")";break;case"IMG":r=l+n.src.split("/").pop();break;case"AMP-IMG":var m=n.src||n.attributes.src.value;r=l+m.split("/").pop();break;default:r=l}i=o.eventOccured(c.type.uiControl,g,"Click - "+this.redact(r)),t.submitEvents([{payload:{}}])}},o.sleep=function(e){for(var n=(new Date).getTime();(new Date).getTime()<n+e;);},o.createCloseHandler=function(e,n){var t;return function(){d.isSMAPIEnabled&&(t||(!0===n&&o.handlePageViewEvent(e,!0),t=!0,i=o.eventOccured(c.type.page,s.na,"Unloaded"),o.httpAsyncDefault=!1,o.closingWindow=!0,e.submitEvents([{payload:{}}]),e.flushBuffer()))}},o.validateEnvironment=function(n){var t=!1;if("string"==typeof n)for(var r in e.Environment)if(n===e.Environment[r]){t=!0;break}return t},o.logEvent=function(e,n){if(d.isSMAPIEnabled)var t=setTimeout(function(){i=o.eventOccured(n,c.element.softNavigation,s.na),e.submitEvents([{payload:{}}]),clearTimeout(t)},100)},o.captureFID=function(){if("undefined"!=typeof PerformanceObserver&&void 0!==PerformanceObserver.supportedEntryTypes&&"function"==typeof PerformanceObserver&&o.contains(PerformanceObserver.supportedEntryTypes,"first-input")){var e=new Promise(function(e,n){var t=new PerformanceObserver(function(n,t){t.disconnect(),e(n)});t.observe({type:"first-input",buffered:!0})}),n=function(e){var n=e.getEntries(),t=n[0],r=t.processingStart-t.startTime;s.fid=r},t=function(e){};e.then(n,t)}},o.captureLCP=function(){if("undefined"!=typeof PerformanceObserver&&void 0!==PerformanceObserver.supportedEntryTypes&&"function"==typeof PerformanceObserver&&o.contains(PerformanceObserver.supportedEntryTypes,"largest-contentful-paint")){var e=new Promise(function(e,n){var t=new PerformanceObserver(function(n,t){t.disconnect(),e(n)});t.observe({type:"largest-contentful-paint",buffered:!0})}),n=function(e){var n=e.getEntries(),t=n[n.length-1],r=t.renderTime||t.loadTime;s.lcp=r},t=function(e){};e.then(n,t)}},o.getUnique=function(e,n,t){var r=e.map(function(e){return e[t][n]}).map(function(e,n,t){return t.indexOf(e)===n&&n}).filter(function(n){return e[n]}).map(function(n){return e[n]});return r},e.angularSPA=function(e,n){var t=0,r=0,a=function(){var e=r-t;return e>=0?e/1e3+" "+s.timeUnit:s.na},u=function(){d.isSMAPIEnabled&&(i=o.eventOccured(c.type.page,c.element.pageDomLoaded,a()),n.submitEvents([{payload:{}}]))};e.$on("$locationChangeStart",function(){d.angularLocationChangeEnabled&&(t=(new Date).getTime())}),e.$on("$locationChangeSuccess",function(){d.angularLocationChangeEnabled&&(r=(new Date).getTime(),u())}),e.$on("$routeChangeStart",function(){t=(new Date).getTime(),d.angularLocationChangeEnabled=!1}),e.$on("$routeChangeError",function(){r=(new Date).getTime(),u(),d.angularLocationChangeEnabled=!0}),e.$on("$routeChangeSuccess",function(){r=(new Date).getTime(),u(),d.angularLocationChangeEnabled=!0}),e.$on("$stateChangeStart",function(){t=(new Date).getTime(),d.angularLocationChangeEnabled=!1}),e.$on("$stateChangeError",function(){r=(new Date).getTime(),u(),d.angularLocationChangeEnabled=!0}),e.$on("$stateChangeSuccess",function(){r=(new Date).getTime(),u(),d.angularLocationChangeEnabled=!0})},o.handleRouteChange=function(e,n){var t,r,i=window.document.createElement("a"),a=function(){window.addEventListener("popstate",function(n){o.logEvent(e,c.type.page)})};d.pageLoad?window.addEventListener("load",function(){setTimeout(a,100)}):a(),"function"==typeof history.pushState&&(history.pushState=(t=history.pushState,function(n,r,a){return i.href=a,a=i.href,o.logEvent(e,c.type.page),t.apply(this,arguments)})),n.replaceState&&"function"==typeof history.replaceState&&(history.replaceState=(r=history.replaceState,function(n,t,a){var s=window.document.URL,d=s;return arguments.length>=3&&null!=a&&(i.href=a,d=i.href),d!==s&&o.logEvent(e,c.type.page),r.apply(this,arguments)}))},e.EventSubmitter=function(e,a,u){if(!o.tmpTransId){if(o.isUndefined(e)||o.isUndefined(a))throw new Error("homeDocUrl/metadata is undefined");if(!o.validateEnvironment(e))throw new Error("homeDocUrl is invalid");if(o.isUndefined(a["x-vf-trace-source"])||o.isUndefined(a["x-vf-trace-source-version"]))throw new Error("metadata must contain x-vf-trace-source and x-vf-trace-source-version property");o.isUndefined(u)&&(u={}),o.setDefault(u,"configureNetworkMonitoring",!1),o.setValue(u,"bufferSize",10),o.getCookie(s.binsName)===s.empty&&(o.setCookie(s.binsName,s.binsUuid,s.empty),t=o.generateUUID(),o.setCookie("VF-SID",t,30)),d.isSMAPIEnabled=o.getOptStatus()===s.empty||o.getOptStatus(),o.setValue(a,"seclib-client-version",s.clientVersion),o.merge(a,{"x-vf-trace-platform":"JS"});var f=o.addOSversion();o.merge(a,{"x-vf-trace-os-version":f.osVersion}),o.merge(a,{"x-vf-trace-os-name":f.os});var l=o.addNetworkBearer();o.merge(a,{"x-vf-trace-network-bearer":l});var p=window.location.hostname;o.merge(a,{"x-vf-trace-application-name":p});var v=s.na;o.merge(a,{"x-vf-trace-subject-region":v});var g=o.addUUID();o.merge(a,{"x-vf-trace-subject-id":g});var m=o.addUserAgent();o.merge(a,{"x-vf-trace-user-agent":m}),o.merge(a,{"install-id":g});var h=o.addLocale();o.merge(a,{"x-vf-trace-mcc":s.na}),o.merge(a,{"x-vf-trace-mnc":s.na}),o.merge(a,{"x-vf-trace-locale":h});var y,w=o.addScreenMetric();o.merge(a,{"x-vf-trace-width":w.width}),o.merge(a,{"x-vf-trace-height":w.height}),r=a;var S=new o.Buffer(u.bufferSize,y,u.bufferFlushSeconds);this._buffer=S;var E=function(){y=o.submitLink(o.submitEventsLink(o.homeDocResponse),a,o.http,u.gzipCompressor)},b=function(){S.handler(y)};o.getHomeDoc(e,a,[E,b]),this.getSettings=function(){return o.getClientSettings(o.clientSettingsLink(o.homeDocResponse),a)},this.flushBuffer=function(){S.flush()},this.clearBuffer=function(){S.clear()},this._render=function(){var n=function(e,n){return"function"==typeof n?"function() {...}":n};return JSON.stringify({serviceDocument:e,headers:a,configuration:u,payload:S._elements},n,3)};var T=(new o.TemporaryCache).startClock();this._cache=T;var x=o.throttleFreeEventsFilter(T);this.getSMAPIStatus=function(){return d.isSMAPIEnabled},this.turnSMAPIOnOff=function(e){if("boolean"==typeof e&&(!0===e||!1===e))return o.setOptStatus(e),void(!1===e&&d.isSMAPIEnabled&&S.filter());throw new Error("status is invalid")};var C=this;this.submitEvents=function(n){var t=x(n);"error"===d.homeDoc&&o.getHomeDoc(e,a,[E,b]),o.addEvents(t),o.debug(t),S.add(o.payloads(t))},this.logCustomEvent=function(e,n,t,r,i,a){if(d.isSMAPIEnabled){var c=function(n){return"string"==typeof e?o.validateField(n):s.na},u={duplication:a,payload:{xVfEvents:{"event-type":"UICustom","event-element":c(e),"event-description":c(n),"page-name":c(t),"subpage-name":c(r),"x-vf-trace-timestamp":(new Date).getTime(),"x-vf-trace-transaction-id":o.generateUUID(),"x-vf-trace-session-id":o.getSessionId(),"device-orientation":o.addScreenMetric().rotation,"x-vf-net-type":s.na,"x-vf-net-band":s.na,"x-vf-trace-subject-id":o.addUUID(),"x-vf-trace-subject-region":s.na}}};for(var f in i)i.hasOwnProperty(f)&&(u.payload.xVfEvents["x-vf-custom-"+o.validateField(f)]=i[f]);C.submitEvents([u])}};var O={};if(this.startRouteTimer=function(e,n){return u&&u.spa&&o.debug("Auto soft-navigation is enabled. Please use either of the approach to capture soft-navigation"),O[e]={startTime:(new Date).getTime(),description:n},O[e]},this.stopRouteTimer=function(e){if(d.isSMAPIEnabled){var n=(new Date).getTime();if(O[e]){console.log(O);var t=O[e].startTime;t&&(i=o.eventOccured(c.type.page,c.element.softNavigation+" ("+O[e].description+")",(n-t)/1e3+" "+s.timeUnit),C.submitEvents([{payload:{}}]),delete O[e])}else o.debug("startRouteTimer is not invoked for id: "+e)}},o.handleBrowserClose(this,u.configureNetworkMonitoring),o.handlePageDOMLoadEvent(this),o.handlePageLoadEvent(this),o.captureLCP(),o.captureFID(),u&&u.spa&&o.handleRouteChange(this,u.spa),null!=document.body){var D=document.body.querySelectorAll("button, [onclick], [type='submit'], [type='button'], [type='reset'], [type='checkbox'], [type='radio'], [type='file'], [type='color'], select, a, img");n.addEventListener&&D.forEach(function(e){e.addEventListener("click",o.throttled(function(e){o.clickEventHandler(e,e.currentTarget,C)},1e3))})}o.handleDOMChanges(this),o.isUndefined(o.observer)||o.observer.observe(document||document.body,{childList:!0,subtree:!0}),o.tmpTransId=o.generateUUID()}}})(void 0===window.exports?window.sec={}:window.exports,window);}}catch(e){utag.DB(e)}},function(a,b){try{if(1){var headers={"x-vf-trace-source":"js:web.vodafone.es","x-vf-trace-source-version":"VF-ES-GCP-PROD","x-vf-trace-application-name":"Vodafone ES"};var sec=window.sec;var opts={configureNetworkMonitoring:true,spa:{replaceState:true}};var secEnvt=sec.Environment.GCP_PRE;if(b['ut.env']=="prod"){secEnvt=sec.Environment.GCP_PROD;}
var submitter=new sec.EventSubmitter(secEnvt,headers,opts);}}catch(e){utag.DB(e)}}];u.send=function(a,b){if(u.ev[a]||u.ev.all!==undefined){var c,d,e,f,i;u.data={};for(c=0;c<u.extend.length;c++){try{d=u.extend[c](a,b);if(d==false)return}catch(e){}};for(d in utag.loader.GV(u.map)){if(b[d]!==undefined&&b[d]!==""){e=u.map[d].split(",");for(f=0;f<e.length;f++){u.data[e[f]]=b[d];}}}
}};utag.o[loader].loader.LOAD(id);})("1522","vodafone.es-main");}catch(error){utag.DB(error);}
